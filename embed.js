(function(){"use strict";var m;(m=window).Storepoint||(m.Storepoint={_q:[],_ready:!1,_instance:null,on:function(r,c){this._q.push([r,c])}}),function(){const r=window,c=[];let f=!1,l=null;r.StorepointWidget=new Proxy(function(){},{construct(p,g){const[h,u,i]=g;if(!h)throw new Error("widgetId is required to create a StorepointWidget.");const a=document.querySelector(u);i!=null&&i.loading_text?a&&(a.innerHTML='<p style="color: inherit; font-size: 14px; text-align: center; padding: 10px 20px;">'+i.loading_text+"</p>"):a&&(a.innerHTML='<p style="color: inherit; font-size: 14px; text-align: center; padding: 10px 20px;">Loading <a href="https://storepoint.co" target="_blank" style="color: inherit;">Storepoint Store Locator Widget</a>...</p>');const y={args:{widgetId:h,widgetDivSelector:u,options:i},load(e){return e&&c.push(()=>e()),this}};return f||function(e){const o=document.createElement("script");o.src="widget-main.js",o.async=!0,o.onload=()=>{l=new r.StorepointWidget(e.args.widgetId,e.args.widgetDivSelector,e.args.options),l.load(),f=!0,c.forEach(s=>s()),function(s,_){const t=r.Storepoint;t._instance=s,t._ready=!0,t._widgetId=_,t._q&&t._q.length>0&&(t._q.forEach(function(n){s.on(n[0],n[1])}),t._q=[]),t.on=function(n,S){s.on(n,S)},["setFilters","setLanguage","getCurrentLocations","addCustomFilter","addCustomLayer","removeCustomLayer"].forEach(function(n){t[n]=function(){if(!t._ready||!t._instance)throw new Error(`Storepoint: Widget not ready. Use Storepoint.on("load", function() { ... }) to run code after widget loads.

Example:
  Storepoint.on("load", function() {
    Storepoint.`+n+`(...);
  });`);return t._instance[n].apply(t._instance,arguments)}});try{document.dispatchEvent(new CustomEvent("storepoint:ready",{detail:{instance:s,widgetId:_}}))}catch{}}(l,e.args.widgetId)},document.head.appendChild(o);const d=document.createElement("link");d.href="style.css",d.rel="stylesheet",document.head.appendChild(d);const w=document.createElement("link");w.href="https://api.storepoint.co/v2/"+e.args.widgetId+"/css",w.rel="stylesheet",document.head.appendChild(w)}(y),new Proxy(y,{get:(e,o)=>o==="load"?e.load.bind(e):(...d)=>{if(f)return l[o](...d);c.push(()=>l[o](...d))}})}}),function(){const p=document.getElementById("storepoint-container");if(p){const g=p.getAttribute("data-map-id"),h=p.getAttribute("data-language")||null,u=p.getAttribute("data-tags")||null;if(g){const i={language:h,tags:u?u.split(",").map(a=>a.trim()):[]};new r.StorepointWidget(g,"#storepoint-container",i).load()}}}()}()})();
